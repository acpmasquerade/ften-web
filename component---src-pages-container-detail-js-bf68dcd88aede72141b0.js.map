{"version":3,"sources":["webpack:///./src/pages/components/preview.js","webpack:///./src/pages/container/view_container.js","webpack:///./src/pages/container/detail.js","webpack:///./src/utils/utils.js"],"names":["pageMargins","stylesIndian","StyleSheet","create","page","flexDirection","paddingLeft","paddingRight","paddingTop","paddingBottom","scene_heading","action","textAlign","character","parenthetical","dialogue","fontSize","transition","ignored","color","styles","fontFamily","MyDocument","props","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4__","size","style","parser","parse","content","toString","tokens","map","token","i","element","type","Element","key","text","console","log","generate","_ref","Preview","render","className","width","height","this","indian","React","Component","ViewContainer","react__WEBPACK_IMPORTED_MODULE_1___default","_components_editor_js__WEBPACK_IMPORTED_MODULE_2__","onChange","onPreview","onDropboxSave","onFileNameChange","file","onError","onInfo","Details","_this","_React$Component","call","value","setState","previewContent","actionToComponent","actionData","TRANSLITERATE","react__WEBPACK_IMPORTED_MODULE_2___default","_trans_editor_js__WEBPACK_IMPORTED_MODULE_5__","onTransliteration","onEditorFilenameChange","onTransEditorFilenameChange","onEditorChange","onTransEditorChange","onDbxTransEditorSave","onDbxEditorSave","_view_container_js__WEBPACK_IMPORTED_MODULE_4__","editorContent","editorFile","state","bind","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default","mode","PREVIEW_MODE_INDIAN","PREVIEW_MODE","_components_preview__WEBPACK_IMPORTED_MODULE_6__","FILE_OPEN","FILE_EDIT","FILE_NEW","EDITOR_MODE","EDITOR_MODE_TRANS","isAllowedExtension","fileName","match"],"mappings":"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","file":"component---src-pages-container-detail-js-bf68dcd88aede72141b0.js","sourcesContent":["import React from \"react\"\nimport { Page, Text, Document, StyleSheet } from '@react-pdf/renderer';\nimport { PDFViewer } from '@react-pdf/renderer';\nimport parser from '../../lib/fountain.js'\n\n//inches\nconst pageMargins = {\n    left: 1.5,\n    right: 1,\n    top: 1,\n    bottom: 1\n}\n// const headingMargin = 1.5\nconst characterMargin = 3.7\nconst dialogMargin = 2.5\nconst parentheticalMargin = 3.1\nlet DPI = 72\n\n// Create styles\nconst stylesIndian = StyleSheet.create({\n  page: {\n    //for some reason marginRight is not working so using padding instead\n    flexDirection: 'col',\n    paddingLeft: pageMargins.left*DPI,\n    paddingRight: pageMargins.right*DPI,\n    paddingTop: pageMargins.top*DPI,\n    paddingBottom: pageMargins.bottom*72,\n  },\n  scene_heading: {\n    paddingTop: 16,\n  },\n  action: {\n    textAlign: 'left',\n    paddingTop: 16,\n    paddingRight: '40%'\n  },\n  character: {\n    paddingTop: 16,\n    paddingLeft: '60%',\n  },\n  parenthetical: {\n    paddingLeft: '60%',\n  },\n  dialogue: {\n    paddingLeft: '60%',\n    fontSize: 14\n  },\n  transition: {\n    textAlign: 'right',\n    paddingTop: 16\n  },\n  ignored: {\n    color: 'red'\n  }\n});\n\nconst styles = StyleSheet.create({\n  page: {\n    //for some reason marginRight is not working so using padding\n    flexDirection: 'col',\n    paddingLeft: pageMargins.left*DPI,\n    paddingRight: pageMargins.right*DPI,\n    paddingTop: pageMargins.top*DPI,\n    paddingBottom: pageMargins.bottom*72,\n    fontFamily: 'Courier'\n  },\n  scene_heading: {\n    paddingTop: 16,\n    paddingBottom: 16,\n  },\n  action: {\n    textAlign: 'left'\n  },\n  character: {\n    paddingTop: 16,\n    paddingLeft: (characterMargin-pageMargins.left)*DPI\n  },\n  parenthetical: {\n    paddingLeft: (parentheticalMargin-pageMargins.left)*DPI\n  },\n  dialogue: {\n    paddingLeft: (dialogMargin-pageMargins.left)*DPI,\n    fontSize: 14\n  },\n  transition: {\n    textAlign: 'right',\n    paddingTop: 16\n  },\n  ignored: {\n    color: 'red'\n  }\n});\n\nconst MyDocument = (props) => (\n  <Document>\n    <Page size=\"A4\" style={props.styles.page}>\n      {generate(props)}\n    </Page>\n  </Document>\n)\n\nconst Element = ({styles, token, text}) => {\n  return <Text style={styles[token]}>{text}</Text>\n}\n\nfunction generate(props) {\n\n  let tokens = parser.parse(props.content.toString(), true).tokens\n\n  let elements = tokens.map(function (token,i) {\n    let element\n    switch (token.type) {\n      case 'title':\n      case 'credit':\n      case 'author':\n      case 'authors':\n      case 'source':\n      case 'notes':\n      case 'draft_date':\n      case 'date':\n      case 'contact':\n      case 'copyright':\n      case 'page_break':\n      case 'line_break':\n      case 'centered':\n      case 'section':\n      case 'synopsis':\n      case 'note':\n      case 'boneyard_begin':\n      case 'boneyard_end':\n        element = <Element key={i} styles={props.styles} token={'ignored'} text={token.text}/>; break;\n      case 'dialogue_begin':\n      case 'dialogue_end':\n      case 'dual_dialogue_begin':\n      case 'dual_dialogue_end': break; //TODO\n      case 'scene_heading':\n      case 'transition':\n      case 'action':\n      case 'parenthetical':\n      case 'dialogue':\n      case 'character':\n        element = <Element key={i} styles={props.styles} token={token.type} text={token.text}/>; break;\n      default:  if (!token.text) { console.log(token) } break;\n    }\n    return element\n  });\n  return elements;\n}\n\n\nexport default class Preview extends React.Component {\n    render() {\n      return <div className=\"pdf\">\n        <PDFViewer style={{width:\"100%\",height:\"90vh\"}}>\n          <MyDocument\n            content={this.props.content}\n            styles={this.props.indian ? stylesIndian : styles}/>\n        </PDFViewer>\n      </div>\n    }\n}\n","import React from \"react\"\nimport Editor from \"../components/editor.js\";\n\nexport default class ViewContainer extends React.Component {\n\n  render() {\n    console.log('view container render')\n    return (\n      <div className=\"view_container\">\n        <Editor\n          style={{ width: '100%' }}\n          onChange={this.props.onChange}\n          content={this.props.content}\n          onPreview={this.props.onPreview}\n          onDropboxSave={this.props.onDropboxSave}\n          onFileNameChange={this.props.onFileNameChange}\n          file={this.props.file}\n          onError={this.props.onError}\n          onInfo={this.props.onInfo} />\n      </div>\n    )\n  }\n}","import React from \"react\"\n\nimport { TRANSLITERATE, PREVIEW_MODE, PREVIEW_MODE_INDIAN } from \"../../utils/utils.js\"\nimport ViewContainer from \"./view_container.js\";\nimport TransEditor from \"./trans_editor.js\";\nimport Preview from \"../components/preview\";\n\nexport default class Details extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      previewContent: null\n    }\n    this.actionToComponent = this.actionToComponent.bind(this)\n    this.onPreview = this.onPreview.bind(this)\n  }\n\n  onPreview = (value, indian) => {\n    this.props.onPreview(indian)\n    this.setState({ previewContent: value })\n  }\n\n  // TODO - just pass actionData as is?\n  actionToComponent = (actionData) => {\n    switch (actionData.action) {\n      case TRANSLITERATE:\n        return <TransEditor\n          actionData={this.props.actionData}                      \n          onTransliteration={this.props.onTransliteration}           \n          onEditorFilenameChange={this.props.onEditorFilenameChange}\n          onTransEditorFilenameChange={this.props.onTransEditorFilenameChange}           \n          onEditorChange={this.props.onEditorChange}\n          onTransEditorChange={this.props.onTransEditorChange}\n          onDbxTransEditorSave={this.props.onDbxTransEditorSave}\n          onDbxEditorSave={this.props.onDbxEditorSave}\n          onPreview={this.onPreview}\n          onError={this.props.onError}\n          onInfo={this.props.onInfo}\n        />\n      default:\n        return <ViewContainer\n          content={actionData.editorContent}\n          file={actionData.editorFile}\n          onFileNameChange={this.props.onEditorFilenameChange}           \n          onChange={this.props.onEditorChange}\n          onPreview={this.onPreview}\n          onDropboxSave={this.props.onDbxEditorSave}\n        />\n    }\n  }\n\n  render() {\n    console.log('detail render');\n    let element\n    if (this.props.actionData.mode === PREVIEW_MODE_INDIAN || this.props.actionData.mode === PREVIEW_MODE) {\n      element = <Preview\n        indian={this.props.actionData.mode === PREVIEW_MODE_INDIAN}\n        content={this.state.previewContent}\n        onError={this.props.onError}\n        onInfo={this.props.onInfo} />\n    }\n    else {\n      element = this.actionToComponent(this.props.actionData)\n    }\n    return (\n      <div className=\"detail\">\n        {element}\n      </div>\n    )\n  }\n}\n","const FILE_OPEN = \"file_open\"\nconst FILE_EDIT = \"file_edit\"\nconst FILE_NEW = \"file_new\" \nconst SETTINGS = \"settings\"\nconst TRANSLITERATE = \"transliterate\"\nconst EDITOR_MODE = 'editor';\nconst EDITOR_MODE_TRANS = 'trans_editor';\nconst PREVIEW_MODE = 'preview';\nconst PREVIEW_MODE_INDIAN = 'preview_indian';\n\nlet isAllowedExtension = (fileName) => {\n    return (fileName.match(/.+.[txt|fountain]$/) == null ? false : true)\n}\n\nlet parseQueryString = function(str) {\n  var ret = Object.create(null);\n\n  if (typeof str !== 'string') {\n    return ret;\n  }\n\n  str = str.trim().replace(/^(\\?|#|&)/, '');\n\n  if (!str) {\n    return ret;\n  }\n\n  str.split('&').forEach(function (param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    // Firefox (pre 40) decodes `%3D` to `=`\n    // https://github.com/sindresorhus/query-string/pull/37\n    var key = parts.shift();\n    var val = parts.length > 0 ? parts.join('=') : undefined;\n\n    key = decodeURIComponent(key);\n\n    // missing `=` should be `null`:\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n    val = val === undefined ? null : decodeURIComponent(val);\n\n    if (ret[key] === undefined) {\n      ret[key] = val;\n    } else if (Array.isArray(ret[key])) {\n      ret[key].push(val);\n    } else {\n      ret[key] = [ret[key], val];\n    }\n  });\n\n  return ret;\n}\n\nexport {isAllowedExtension, parseQueryString, FILE_EDIT, FILE_NEW, FILE_OPEN, EDITOR_MODE_TRANS, EDITOR_MODE, SETTINGS,PREVIEW_MODE,PREVIEW_MODE_INDIAN, TRANSLITERATE}"],"sourceRoot":""}