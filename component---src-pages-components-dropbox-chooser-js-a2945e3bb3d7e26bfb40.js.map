{"version":3,"sources":["webpack:///./src/pages/components/menu_item.js","webpack:///./src/pages/components/dropbox-chooser.js","webpack:///./node_modules/load-script/index.js"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","props","a","createElement","className","alt","src","width","onClick","scriptLoadingStarted","DropboxChooser","_this","_React$Component","call","this","onChoose","bind","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default","componentDidMount","isDropboxReady","loadScript","attrs","id","data-app-key","appKey","window","Dropbox","disabled","_this$props","success","cancel","linkType","multiSelect","folderselect","extensions","choose","render","react__WEBPACK_IMPORTED_MODULE_2___default","_menu_item_js__WEBPACK_IMPORTED_MODULE_5__","React","Component","propTypes","children","PropTypes","node","string","isRequired","func","oneOf","multiselect","bool","arrayOf","defaultProps","stdOnEnd","script","cb","onload","onerror","Error","ieOnEnd","onreadystatechange","readyState","module","exports","opts","head","document","getElementsByTagName","type","charset","async","attr","setAttribute","setAttributes","text","appendChild"],"mappings":"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","file":"component---src-pages-components-dropbox-chooser-js-a2945e3bb3d7e26bfb40.js","sourcesContent":["import React from \"react\"\n\nexport default (props) =>\n    <div className={props.className} > \n        <span className=\"tooltiptext\">{props.alt}</span>        \n        <img \n            src={props.src} \n            alt={props.alt}\n            width=\"50px\"\n            onClick={props.onClick}/>          \n    </div>\n\n ","import React from \"react\";\n\nimport PropTypes from 'prop-types';\nimport loadScript from 'load-script';\nimport MenuItem from \"./menu_item.js\";\n\nconst DROPBOX_SDK_URL = 'https://www.dropbox.com/static/api/2/dropins.js';\nconst SCRIPT_ID = 'dropboxjs';\n\nlet scriptLoadingStarted = false;\n\nexport default class DropboxChooser extends React.Component {\n\n  static propTypes = {\n    children: PropTypes.node,\n    appKey: PropTypes.string.isRequired,\n    success: PropTypes.func.isRequired,\n    cancel: PropTypes.func,\n    linkType: PropTypes.oneOf(['preview', 'direct']),\n    multiselect: PropTypes.bool,\n    folderselect: PropTypes.bool,\n    extensions: PropTypes.arrayOf(PropTypes.string),\n    disabled: PropTypes.bool\n  };\n\n  static defaultProps = {\n    cancel: () => { },\n    linkType: 'direct',\n    multiselect: false,\n    folderselect: false,\n    disabled: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.onChoose = this.onChoose.bind(this)\n  }\n\n  componentDidMount() {\n    if (!this.isDropboxReady() && !scriptLoadingStarted) {\n      scriptLoadingStarted = true;\n\n      loadScript(DROPBOX_SDK_URL, {\n        attrs: {\n          id: SCRIPT_ID,\n          'data-app-key': this.props.appKey\n        }\n      })\n    }\n  }\n\n  isDropboxReady() {\n    return !!window.Dropbox;\n  }\n\n  onChoose() {\n    if (!this.isDropboxReady() || this.props.disabled) {\n      return null;\n    }\n\n    const {\n      success,\n      cancel,\n      linkType,\n      multiSelect,\n      folderselect,\n      extensions\n    } = this.props;\n\n    window.Dropbox.choose({\n      success,\n      cancel,\n      linkType,\n      multiSelect,\n      folderselect,\n      extensions\n    });\n  }\n\n  render() {\n    return <MenuItem\n      className=\"menu-item\"\n      onClick={this.onChoose}\n      src=\"gfx/icons/dropbox-open-icon.svg\" alt=\"Dropbox\" />\n  }\n}","\nmodule.exports = function load (src, opts, cb) {\n  var head = document.head || document.getElementsByTagName('head')[0]\n  var script = document.createElement('script')\n\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  opts = opts || {}\n  cb = cb || function() {}\n\n  script.type = opts.type || 'text/javascript'\n  script.charset = opts.charset || 'utf8';\n  script.async = 'async' in opts ? !!opts.async : true\n  script.src = src\n\n  if (opts.attrs) {\n    setAttributes(script, opts.attrs)\n  }\n\n  if (opts.text) {\n    script.text = '' + opts.text\n  }\n\n  var onend = 'onload' in script ? stdOnEnd : ieOnEnd\n  onend(script, cb)\n\n  // some good legacy browsers (firefox) fail the 'in' detection above\n  // so as a fallback we always set onload\n  // old IE will ignore this and new IE will set onload\n  if (!script.onload) {\n    stdOnEnd(script, cb);\n  }\n\n  head.appendChild(script)\n}\n\nfunction setAttributes(script, attrs) {\n  for (var attr in attrs) {\n    script.setAttribute(attr, attrs[attr]);\n  }\n}\n\nfunction stdOnEnd (script, cb) {\n  script.onload = function () {\n    this.onerror = this.onload = null\n    cb(null, script)\n  }\n  script.onerror = function () {\n    // this.onload = null here is necessary\n    // because even IE9 works not like others\n    this.onerror = this.onload = null\n    cb(new Error('Failed to load ' + this.src), script)\n  }\n}\n\nfunction ieOnEnd (script, cb) {\n  script.onreadystatechange = function () {\n    if (this.readyState != 'complete' && this.readyState != 'loaded') return\n    this.onreadystatechange = null\n    cb(null, script) // there is no way to catch loading errors in IE8\n  }\n}\n"],"sourceRoot":""}