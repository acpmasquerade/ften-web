(window.webpackJsonp=window.webpackJsonp||[]).push([[11,7,21,23],{142:function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return a});t(73);var r=t(172);function a(e,n){var t=100;function a(n){var t=e.getTokenTypeAt(r.Pos(n,0)),a=/\bsection\b/.test(t);return t&&a}function i(e,n,r){var i=n&&n.match(/^#+/);return i&&a(e)?i[0].length:t}function o(e,n){return n&&/(^\.[\w]+.+)|(?:(?:^int|ext|est|int\.ext|int\/ext|i\/e)[. ].+)$/i.test(n)}var s=e.getLine(n.line),l=e.getLine(n.line+1);if(o(n.line,s)){for(var d=e.lastLine(),c=n.line,u=e.getLine(c+2);c<d&&!o(0,l)&&!a(c+1);)++c,l=u,u=e.getLine(c+2);return{from:r.Pos(n.line,s.length),to:r.Pos(c,e.getLine(c).length)}}var p=i(n.line,s);if(p!==t){for(var f=e.lastLine(),h=n.line,g=e.getLine(h+2);h<f&&!(i(h+1,l)<=p);)++h,l=g,g=e.getLine(h+2);return{from:r.Pos(n.line,s.length),to:r.Pos(h,e.getLine(h).length)}}}},143:function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return E});var r=t(33),a=t.n(r),i=t(7),o=t.n(i),s=t(0),l=t.n(s),d=t(200),c=t(145),u=t(201),p=t(210),f=t(146);t(154),t(155),t(156),t(157);t(192),t(202),t(203),t(193),t(194);var h="newfile.fountain",g=function(e,n,t){return l.a.createElement("button",{className:"editor__toolbar__btn",onClick:e},l.a.createElement("img",{src:n,width:"24px",alt:t}))},b={name:"fountain",fn:f.default},v={foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineNumbers:!0,theme:"material",mode:"fountain",lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())},"Shift-Ctrl-F":function(e){e.eachLine(function(n){e.foldCode(n.lineNo())})}}},E=function(e){function n(n){var t;return(t=e.call(this,n)||this).download=function(){if(t.editorInstance){var e=t.editorInstance.getValue(),n=t.props.file||h,r=new Blob([e],{type:"text/plain;charset=utf-8"});Object(d.saveAs)(r,n)}else t.props.onError("editorInstance not loaded!")},t.saveToDropbox=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.onDropboxSave(t.props.file,e)}else t.props.onError("editorInstance not loaded!")},t.transliterate=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.transMenu.onTransliteration(e,t.props.transMenu.selectedScheme)}else t.props.onError("editorInstance not loaded!")},t.generatePdf=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.onPreview(e,!1)}else t.props.onError("editorInstance not loaded!")},t.generateIndianPdf=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.onPreview(e,!0)}else t.props.onError("editorInstance not loaded!")},t.handleTransSelection=function(e){t.props.transMenu.onSelection(e)},t.editorInstance=null,t.transliterate=t.transliterate.bind(a()(t)),t.download=t.download.bind(a()(t)),t.generatePdf=t.generatePdf.bind(a()(t)),t.handleTransSelection=t.handleTransSelection.bind(a()(t)),t.saveToDropbox=t.saveToDropbox.bind(a()(t)),t}return o()(n,e),n.prototype.render=function(){var e=this;console.log("editor render");var n=this.props.file||h,t=g(this.download,"gfx/icons/download.svg","downloand"),r=g(this.generatePdf,"gfx/icons/pdf.svg","pdf"),a=g(this.generateIndianPdf,"gfx/icons/indian.svg","pdf"),i=g(this.transliterate,"gfx/icons/arrow.svg","Transliterate"),o=g(this.saveToDropbox,"gfx/icons/dropbox.svg","Dropbox"),s=this.props.transMenu?l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(p.a,{className:"transmenu",value:this.props.transMenu.selectedScheme,onChange:this.handleTransSelection,options:this.props.transMenu.options}),i):null;return l.a.createElement("div",{className:"editor",style:this.props.style},l.a.createElement("div",{className:"editor__toolbar"},l.a.createElement(c.default,{onEditEnd:function(n){e.props.onFileNameChange(n)},maxLength:"20",containerClass:"input-container",inputClass:"input-class",textClass:"text-class",value:n}),s,t,o,r,a),l.a.createElement(u.Controlled,{defineMode:b,editorDidMount:function(n){e.editorInstance=n},value:this.props.content,options:v,onBeforeChange:function(n,t,r){return!!e.props.content&&e.props.onChange(r)},onChange:function(e,n,t){}}))},n}(l.a.Component)},145:function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return d});var r=t(33),a=t.n(r),i=t(7),o=t.n(i),s=t(0),l=t.n(s),d=function(e){function n(n){var t;return(t=e.call(this,n)||this).enableEditMode=function(){t.setState({editEnabled:!0})},t.disableEditMode=function(){t.setState({editEnabled:!1})},t.onBlur=function(e){t.disableEditMode(),t.props.onEditEnd&&t.props.onEditEnd(t.input.current.value)},t.handleEnterKey=function(e){13!==e.keyCode&&13!==e.charCode||t.disableEditMode(),t.props.onEditEnd&&t.props.onEditEnd(t.input.current.value)},t.state={editEnabled:!1},t.input=l.a.createRef(),t.enableEditMode=t.enableEditMode.bind(a()(t)),t.disableEditMode=t.disableEditMode.bind(a()(t)),t}return o()(n,e),n.prototype.render=function(){var e=this.props.value&&this.props.value.length>this.props.maxLength?this.props.value.substring(0,this.props.maxLength)+"...":this.props.value,n=this.state.editEnabled?l.a.createElement("input",{ref:this.input,className:this.props.inputClass,type:"text",defaultValue:this.props.value,autoFocus:!0,onBlur:this.onBlur,onKeyPress:this.handleEnterKey}):l.a.createElement("span",{className:this.props.textClass},e);return l.a.createElement("div",{className:this.props.containerClass,onClick:this.enableEditMode},n)},n}(l.a.Component)},146:function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return g});t(73);var r=t(172),a=t(142),i=/(^\.[\w]+.+)|(?:(?:^int|ext|est|int\.ext|int\/ext|i\/e)[. ].+)$/i,o=/^[A-Z\s]+TO:$/,s=/^['A-Z\s\d]+(\s*\(.+\)\s*)*$/,l=/^\s*\(.+\)\s*$/,d=/^>(.+)<$/,c=/^#+/,u=/^\*(.+)\*$/,p=/^\*\*(.+)\*\*$/,f=/^\*\*\*(.+)\*\*\*$/,h=/^_(.+)_$/;function g(e,n){function t(e){var n=e.lookAhead(1);return!n||""===n}return r.registerHelper("fold","fountain",a.default),{startState:function(){return console.log("startState"),{blankLine:!1,character:!1,parenthetical:!1}},token:function(e,n){if(console.log("token"),e.match(u))return e.skipToEnd(),"em";if(e.match(p))return e.skipToEnd(),"strong";if(e.match(f))return e.skipToEnd(),"em strong";if(e.match(h))return e.skipToEnd(),"link";if(e.match(c))return e.skipToEnd(),"ften-section";if(e.match(d))return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!1,n.parenthetical=!1,"ften-centered-text";if((n.character||n.dialog)&&e.match(l))return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!0,n.parenthetical=!0,"variable-2 ften-parenthetical";if(n.character||n.parenthetical)return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.parenthetical=!1,n.dialog=!0,"string ften-dialog";if(n.blankLine){if(e.match(s)&&!t(e))return e.skipToEnd(),n.blankLine=!1,n.character=!0,n.dialog=!1,n.parenthetical=!1,"keyword ften-character";if(e.match(o)&&t(e))return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!1,n.parenthetical=!1,"line-ften-transition"}return e.match(i)&&t(e)?(e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!1,n.parenthetical=!1,"variable-2 line-ften-slugline"):(e.next(),"line-ften-action")},blankLine:function(e){e.blankLine=!0}}}}}]);
//# sourceMappingURL=component---src-pages-components-editor-js-bb151335bf72e2133332.js.map