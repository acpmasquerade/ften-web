(window.webpackJsonp=window.webpackJsonp||[]).push([[10,6],{143:function(e,n,t){"use strict";t.r(n);var r=t(33),a=t.n(r),i=t(7),o=t.n(i),s=t(0),l=t.n(s),d=t(236),c=t(144),p=t(275),u=(t(74),t(173));function f(e,n){var t=100;function r(n){var t=e.getTokenTypeAt(u.Pos(n,0)),r=/\bsection\b/.test(t);return t&&r}function a(e,n,a){var i=n&&n.match(/^#+/);return i&&r(e)?i[0].length:t}function i(e,n){return n&&/(^\.[\w]+.+)|(?:(?:^int|ext|est|int\.ext|int\/ext|i\/e)[. ].+)$/i.test(n)}var o=e.getLine(n.line),s=e.getLine(n.line+1);if(i(n.line,o)){for(var l=e.lastLine(),d=n.line,c=e.getLine(d+2);d<l&&!i(0,s)&&!r(d+1);)++d,s=c,c=e.getLine(d+2);return{from:u.Pos(n.line,o.length),to:u.Pos(d,e.getLine(d).length)}}var p=a(n.line,o);if(p!==t){for(var f=e.lastLine(),h=n.line,g=e.getLine(h+2);h<f&&!(a(h+1,s)<=p);)++h,s=g,g=e.getLine(h+2);return{from:u.Pos(n.line,o.length),to:u.Pos(h,e.getLine(h).length)}}}var h=t(173),g=/(^\.[\w]+.+)|(?:(?:^int|ext|est|int\.ext|int\/ext|i\/e)[. ].+)$/i,b=/^[A-Z\s]+TO:$/,v=/^['A-Z\s\d]+(\s*\(.+\)\s*)*$/,E=/^\s*\(.+\)\s*$/,m=/^>(.+)<$/,k=/^#+/,x=/^\*(.+)\*$/,C=/^\*\*(.+)\*\*$/,L=/^\*\*\*(.+)\*\*\*$/,T=/^_(.+)_$/;var w=t(237);t(154),t(155),t(156),t(157);t.d(n,"default",function(){return S}),t(208),t(238),t(239),t(209),t(210);var I="newfile.fountain",M=function(e,n,t){return l.a.createElement("button",{className:"editor__toolbar__btn",onClick:e},l.a.createElement("img",{src:n,width:"24px",alt:t}))},y={name:"fountain",fn:function(e,n){function t(e){var n=e.lookAhead(1);return!n||""===n}return h.registerHelper("fold","fountain",f),{startState:function(){return console.log("startState"),{blankLine:!1,character:!1,parenthetical:!1}},token:function(e,n){if(console.log("token"),e.match(x))return e.skipToEnd(),"em";if(e.match(C))return e.skipToEnd(),"strong";if(e.match(L))return e.skipToEnd(),"em strong";if(e.match(T))return e.skipToEnd(),"link";if(e.match(k))return e.skipToEnd(),"ften-section";if(e.match(m))return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!1,n.parenthetical=!1,"ften-centered-text";if((n.character||n.dialog)&&e.match(E))return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!0,n.parenthetical=!0,"variable-2 ften-parenthetical";if(n.character||n.parenthetical)return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.parenthetical=!1,n.dialog=!0,"string ften-dialog";if(n.blankLine){if(e.match(v)&&!t(e))return e.skipToEnd(),n.blankLine=!1,n.character=!0,n.dialog=!1,n.parenthetical=!1,"keyword ften-character";if(e.match(b)&&t(e))return e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!1,n.parenthetical=!1,"line-ften-transition"}return e.match(g)&&t(e)?(e.skipToEnd(),n.blankLine=!1,n.character=!1,n.dialog=!1,n.parenthetical=!1,"variable-2 line-ften-slugline"):(e.next(),"line-ften-action")},blankLine:function(e){e.blankLine=!0}}}},P={foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineNumbers:!0,theme:"material",mode:"fountain",lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())},"Shift-Ctrl-F":function(e){e.eachLine(function(n){e.foldCode(n.lineNo())})}}},S=function(e){function n(n){var t;return(t=e.call(this,n)||this).download=function(){if(t.editorInstance){var e=t.editorInstance.getValue(),n=t.props.file||I,r=new Blob([e],{type:"text/plain;charset=utf-8"});Object(d.saveAs)(r,n)}else t.props.onError("editorInstance not loaded!")},t.saveToDropbox=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.onDropboxSave(t.props.file,e)}else t.props.onError("editorInstance not loaded!")},t.transliterate=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.transMenu.onTransliteration(e,t.props.transMenu.selectedScheme)}else t.props.onError("editorInstance not loaded!")},t.generatePdf=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.onPreview(e,!1)}else t.props.onError("editorInstance not loaded!")},t.generateIndianPdf=function(){if(t.editorInstance){var e=t.editorInstance.getValue();t.props.onPreview(e,!0)}else t.props.onError("editorInstance not loaded!")},t.handleTransSelection=function(e){t.props.transMenu.onSelection(e)},t.editorInstance=null,t.transliterate=t.transliterate.bind(a()(t)),t.download=t.download.bind(a()(t)),t.generatePdf=t.generatePdf.bind(a()(t)),t.handleTransSelection=t.handleTransSelection.bind(a()(t)),t.saveToDropbox=t.saveToDropbox.bind(a()(t)),t}return o()(n,e),n.prototype.render=function(){var e=this;console.log("editor render");var n=this.props.file||I,t=M(this.download,"gfx/icons/download.svg","downloand"),r=M(this.generatePdf,"gfx/icons/pdf.svg","pdf"),a=M(this.generateIndianPdf,"gfx/icons/indian.svg","pdf"),i=M(this.transliterate,"gfx/icons/arrow.svg","Transliterate"),o=M(this.saveToDropbox,"gfx/icons/dropbox.svg","Dropbox"),s=this.props.transMenu?l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(p.a,{className:"transmenu",value:this.props.transMenu.selectedScheme,onChange:this.handleTransSelection,options:this.props.transMenu.options}),i):null;return l.a.createElement("div",{className:"editor",style:this.props.style},l.a.createElement("div",{className:"editor__toolbar"},l.a.createElement(c.default,{onEditEnd:function(n){e.props.onFileNameChange(n)},maxLength:"20",containerClass:"input-container",inputClass:"input-class",textClass:"text-class",value:n}),s,t,o,r,a),l.a.createElement(w.Controlled,{defineMode:y,editorDidMount:function(n){e.editorInstance=n},value:this.props.content,options:P,onBeforeChange:function(n,t,r){return!!e.props.content&&e.props.onChange(r)},onChange:function(e,n,t){}}))},n}(l.a.Component)},144:function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return d});var r=t(33),a=t.n(r),i=t(7),o=t.n(i),s=t(0),l=t.n(s),d=function(e){function n(n){var t;return(t=e.call(this,n)||this).enableEditMode=function(){t.setState({editEnabled:!0})},t.disableEditMode=function(){t.setState({editEnabled:!1})},t.onBlur=function(e){t.disableEditMode(),t.props.onEditEnd&&t.props.onEditEnd(t.input.current.value)},t.handleEnterKey=function(e){13!==e.keyCode&&13!==e.charCode||t.disableEditMode(),t.props.onEditEnd&&t.props.onEditEnd(t.input.current.value)},t.state={editEnabled:!1},t.input=l.a.createRef(),t.enableEditMode=t.enableEditMode.bind(a()(t)),t.disableEditMode=t.disableEditMode.bind(a()(t)),t}return o()(n,e),n.prototype.render=function(){var e=this.props.value&&this.props.value.length>this.props.maxLength?this.props.value.substring(0,this.props.maxLength)+"...":this.props.value,n=this.state.editEnabled?l.a.createElement("input",{ref:this.input,className:this.props.inputClass,type:"text",defaultValue:this.props.value,autoFocus:!0,onBlur:this.onBlur,onKeyPress:this.handleEnterKey}):l.a.createElement("span",{className:this.props.textClass},e);return l.a.createElement("div",{className:this.props.containerClass,onClick:this.enableEditMode},n)},n}(l.a.Component)}}]);
//# sourceMappingURL=component---src-pages-components-editor-js-ac96c2c537e96646475e.js.map