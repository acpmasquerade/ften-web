{"version":3,"sources":["webpack:///./src/pages/components/menu_item.js","webpack:///./src/pages/components/dropbox-chooser.js","webpack:///./src/pages/components/menu_bar.js","webpack:///./node_modules/load-script/index.js"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","props","a","createElement","className","alt","src","width","onClick","scriptLoadingStarted","DropboxChooser","_this","_React$Component","call","this","onChoose","bind","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default","componentDidMount","isDropboxReady","loadScript","attrs","id","data-app-key","appKey","window","Dropbox","disabled","_this$props","success","cancel","linkType","multiSelect","folderselect","extensions","choose","render","react__WEBPACK_IMPORTED_MODULE_2___default","_menu_item_js__WEBPACK_IMPORTED_MODULE_5__","React","Component","propTypes","children","PropTypes","node","string","isRequired","func","oneOf","multiselect","bool","arrayOf","defaultProps","MenuBar","showOpenFileDlg","inputOpenFileRef","current","click","onChangeFile","event","stopPropagation","preventDefault","file","target","files","onOpen","value","createRef","react__WEBPACK_IMPORTED_MODULE_1___default","type","accept","onChange","ref","style","display","_menu_item_js__WEBPACK_IMPORTED_MODULE_2__","_dropbox_chooser_js__WEBPACK_IMPORTED_MODULE_3__","onDropboxSuccess","onNew","onEdit","onTransliterate","onAbout","stdOnEnd","script","cb","onload","onerror","Error","ieOnEnd","onreadystatechange","readyState","module","exports","opts","head","document","getElementsByTagName","charset","async","attr","setAttribute","setAttributes","text","appendChild"],"mappings":"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","file":"component---src-pages-components-menu-bar-js-8586a15e5895e7864cd1.js","sourcesContent":["import React from \"react\"\n\nexport default (props) =>\n    <div className={props.className} > \n        <span className=\"tooltiptext\">{props.alt}</span>        \n        <img \n            src={props.src} \n            alt={props.alt}\n            width=\"50px\"\n            onClick={props.onClick}/>          \n    </div>\n\n ","import React from \"react\";\n\nimport PropTypes from 'prop-types';\nimport loadScript from 'load-script';\nimport MenuItem from \"./menu_item.js\";\n\nconst DROPBOX_SDK_URL = 'https://www.dropbox.com/static/api/2/dropins.js';\nconst SCRIPT_ID = 'dropboxjs';\n\nlet scriptLoadingStarted = false;\n\nexport default class DropboxChooser extends React.Component {\n\n  static propTypes = {\n    children: PropTypes.node,\n    appKey: PropTypes.string.isRequired,\n    success: PropTypes.func.isRequired,\n    cancel: PropTypes.func,\n    linkType: PropTypes.oneOf(['preview', 'direct']),\n    multiselect: PropTypes.bool,\n    folderselect: PropTypes.bool,\n    extensions: PropTypes.arrayOf(PropTypes.string),\n    disabled: PropTypes.bool\n  };\n\n  static defaultProps = {\n    cancel: () => { },\n    linkType: 'direct',\n    multiselect: false,\n    folderselect: false,\n    disabled: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.onChoose = this.onChoose.bind(this)\n  }\n\n  componentDidMount() {\n    if (!this.isDropboxReady() && !scriptLoadingStarted) {\n      scriptLoadingStarted = true;\n\n      loadScript(DROPBOX_SDK_URL, {\n        attrs: {\n          id: SCRIPT_ID,\n          'data-app-key': this.props.appKey\n        }\n      })\n    }\n  }\n\n  isDropboxReady() {\n    return !!window.Dropbox;\n  }\n\n  onChoose() {\n    if (!this.isDropboxReady() || this.props.disabled) {\n      return null;\n    }\n\n    const {\n      success,\n      cancel,\n      linkType,\n      multiSelect,\n      folderselect,\n      extensions\n    } = this.props;\n\n    window.Dropbox.choose({\n      success,\n      cancel,\n      linkType,\n      multiSelect,\n      folderselect,\n      extensions\n    });\n  }\n\n  render() {\n    return <MenuItem\n      className=\"menu-item\"\n      onClick={this.onChoose}\n      src=\"gfx/icons/dropbox-open-icon.svg\" alt=\"Dropbox\" />\n  }\n}","import React from \"react\"\nimport MenuItem from \"./menu_item.js\"\nimport DropboxChooser from \"./dropbox-chooser.js\"\n\nconst DROPBOX_APP_KEY = 'dlgs25astqhe1gc';\n\nexport default class MenuBar extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.inputOpenFileRef = React.createRef()\n  }\n  showOpenFileDlg = () => {\n    this.inputOpenFileRef.current.click()\n  }\n  onChangeFile = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    let file = event.target.files[0];\n    if (file) {\n      this.props.onOpen(file);\n    }\n    // So the same file can be selected again.\n    const element = event.target;\n    element.value = '';\n  }\n  \n  render() {\n    return <div className=\"menu-bar\">\n      <input type='file' id='file'\n        accept=\".fountain,.txt\"\n        onChange={this.onChangeFile.bind(this)}\n        ref={this.inputOpenFileRef} style={{ display: 'none' }} />\n      <MenuItem className=\"menu-item\"\n        onClick={this.showOpenFileDlg}\n        src=\"gfx/icons/open.svg\" alt=\"Open File\" />\n      <DropboxChooser \n        appKey={DROPBOX_APP_KEY}\n        extensions={['.fountain','.txt']}\n        success={this.props.onDropboxSuccess}/>\n      <MenuItem className=\"menu-item\"\n        onClick={this.props.onNew}\n        src=\"gfx/icons/new.svg\" alt=\"New\" />  \n      <MenuItem className=\"menu-item\"\n        onClick={this.props.onEdit}\n        src=\"gfx/icons/editor.svg\" alt=\"Edit\" />\n      <MenuItem className=\"menu-item\"\n        onClick={this.props.onTransliterate}\n        src=\"gfx/icons/translation.svg\" alt=\"Trans\" />\n      <MenuItem className=\"menu-item\"\n        onClick={this.props.onAbout}\n        src=\"gfx/icons/info.svg\" alt=\"About\" />\n    </div>\n  }\n}","\nmodule.exports = function load (src, opts, cb) {\n  var head = document.head || document.getElementsByTagName('head')[0]\n  var script = document.createElement('script')\n\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  opts = opts || {}\n  cb = cb || function() {}\n\n  script.type = opts.type || 'text/javascript'\n  script.charset = opts.charset || 'utf8';\n  script.async = 'async' in opts ? !!opts.async : true\n  script.src = src\n\n  if (opts.attrs) {\n    setAttributes(script, opts.attrs)\n  }\n\n  if (opts.text) {\n    script.text = '' + opts.text\n  }\n\n  var onend = 'onload' in script ? stdOnEnd : ieOnEnd\n  onend(script, cb)\n\n  // some good legacy browsers (firefox) fail the 'in' detection above\n  // so as a fallback we always set onload\n  // old IE will ignore this and new IE will set onload\n  if (!script.onload) {\n    stdOnEnd(script, cb);\n  }\n\n  head.appendChild(script)\n}\n\nfunction setAttributes(script, attrs) {\n  for (var attr in attrs) {\n    script.setAttribute(attr, attrs[attr]);\n  }\n}\n\nfunction stdOnEnd (script, cb) {\n  script.onload = function () {\n    this.onerror = this.onload = null\n    cb(null, script)\n  }\n  script.onerror = function () {\n    // this.onload = null here is necessary\n    // because even IE9 works not like others\n    this.onerror = this.onload = null\n    cb(new Error('Failed to load ' + this.src), script)\n  }\n}\n\nfunction ieOnEnd (script, cb) {\n  script.onreadystatechange = function () {\n    if (this.readyState != 'complete' && this.readyState != 'loaded') return\n    this.onreadystatechange = null\n    cb(null, script) // there is no way to catch loading errors in IE8\n  }\n}\n"],"sourceRoot":""}